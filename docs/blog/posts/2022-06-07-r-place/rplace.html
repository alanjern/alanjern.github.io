<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alan Jern">
<meta name="dcterms.date" content="2022-06-07">

<title>Alan Jern - An analysis of Reddit‚Äôs r/place</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../icon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-71M9JBSY79"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-71M9JBSY79', { 'anonymize_ip': true});
</script>
<style>figure { padding: 0 2em 0 2em; }</style>


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Alan Jern - An analysis of Reddit‚Äôs r/place">
<meta property="og:description" content="My favorite thing on the Internet this year was Reddit‚Äôs r/place, a collaborative art project that lasted several days. Analyzing the official data from the event released by Reddit, I found that, contrary to my expectations, activity wasn‚Äôt dominated by a small fraction of users and bots were relatively rare.">
<meta property="og:image" content="featured.png">
<meta property="og:site-name" content="Alan Jern">
<meta name="twitter:title" content="Alan Jern - An analysis of Reddit‚Äôs r/place">
<meta name="twitter:description" content="My favorite thing on the Internet this year was Reddit‚Äôs r/place, a collaborative art project that lasted several days. Analyzing the official data from the event released by Reddit, I found that, contrary to my expectations, activity wasn‚Äôt dominated by a small fraction of users and bots were relatively rare.">
<meta name="twitter:image" content="featured.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Alan Jern</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../publications/publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../teaching/teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../lab/lab.html" rel="" target="">
 <span class="menu-text">Lab</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../blog/blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">An analysis of Reddit‚Äôs r/place</h1>
<p class="subtitle lead">My favorite thing on the Internet this year was Reddit‚Äôs r/place, a collaborative art project that lasted several days. Analyzing the official data from the event released by Reddit, I found that, contrary to my expectations, activity wasn‚Äôt dominated by a small fraction of users and bots were relatively rare.</p>
  <div class="quarto-categories">
    <div class="quarto-category">Data Analysis</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alan Jern </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 7, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="featured.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">The final r/place canvas.</figcaption>
</figure>
</div>
<p>One of my favorite things on the internet this year was <a href="https://www.washingtonpost.com/technology/2022/04/04/reddit-place-internet-communities/">Reddit‚Äôs r/place</a>, a multi-day collaborative art project in which each user could set the color of one pixel every five minutes on a giant 2000x2000 pixel canvas.</p>
<p>With millions of users, the result could easily have been a chaotic mess. Instead, subreddit communities coordinated and cooperated to produce something pretty amazing (see the final product at the top of this post).</p>
<p>After r/place ended, Reddit <a href="https://www.reddit.com/r/place/comments/txvk2d/rplace_datasets_april_fools_2022/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=iossmf">released all the pixel data</a> from the event. I thought it might be interesting to see what I could learn from it.</p>
<section id="how-did-the-event-unfold" class="level2">
<h2 class="anchored" data-anchor-id="how-did-the-event-unfold">How did the event unfold?</h2>
<p>One of the most fascinating parts of watching r/place happen was all the ensuing drama ‚Äì the feuds, the conflicts, the warring factions, the invasions. Groups were constantly battling over territory, there was a purely destructive group known as The Black Void whose goal was just to erase everything with black pixels, and certain areas were frequent targets for vandalism.</p>
<p>You can get a sense of all that by watching <a href="https://youtu.be/K5O3UgLG2Jw">this timelapse video</a>.</p>
<p>What did the event look like from the standpoint of the raw data? First, let‚Äôs look at pixel placement activity over time.</p>
<section id="overall-activity-over-time" class="level3">
<h3 class="anchored" data-anchor-id="overall-activity-over-time">Overall activity over time üìà</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/plot-pixels-over-time-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The most obvious trend is increasing activity over time. Interest likely went up as more people learned about r/place.</p>
<p>The plot also shows moderator activity (the colored bands). This was a point of controversy and speculation ‚Äì specifically, that admins were censoring stuff they didn‚Äôt like. But according to the data, the moderators took a pretty hands-off approach, only intervening 19 times.</p>
<p>When they did intervene, they drew a colored square over some objectionable content. The bands in the plot show the colors the mods used; the widths of the bands are relative to the size of the squares the mods drew.</p>
</section>
<section id="which-colors-were-most-popular" class="level3">
<h3 class="anchored" data-anchor-id="which-colors-were-most-popular">Which colors were most popular? üé®</h3>
<p>At two points in the event, the admins increased the number of available pixel colors. By the end, there were 32 colors to pick from.</p>
<p>Let‚Äôs look at which colors were most popular and when.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Black and white were far and away the most popular colors.</p>
<p>You can see the two points when the new sets of colors were introduced. Most of the new colors never overtook the original colors in popularity, but a couple did.</p>
<p>Keep in mind that these totals don‚Äôt necessarily represent how prevalent a color is in the final canvas. This plot just shows how often people placed pixels with each color. That color may have been overwritten numerous times.</p>
</section>
<section id="which-parts-of-the-canvas-were-most-contentious" class="level3">
<h3 class="anchored" data-anchor-id="which-parts-of-the-canvas-were-most-contentious">Which parts of the canvas were most contentious? ü•ä</h3>
<p>We can get the best visual sense of the drama that unfolded on r/place by looking at which pixels had the most activity. If a pixel was overwritten many times, that‚Äôs a sign that users were fighting over that area of the canvas.</p>
<p>In the picture below, I‚Äôve made a heatmap where brighter spots indicate areas where there was more activity and darker spots indicate areas with less activity.</p>
<div class="cell" data-fig.dim="[7,7]">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/pixel-activity-heatmap-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The amazing thing about this image is that, if you look carefully, you can make out many parts of the final canvas, like the <a href="https://place-atlas.stefanocoding.me/#000031">Turkish flag</a> or the <a href="https://place-atlas.stefanocoding.me/#txibq9">osu! logo</a>. This shows how contentious these areas were: they were frequently under attack and lots of work was put into preserving them.</p>
<p><strong>The most active pixel was changed nearly 100,000 times</strong>. It happened to be the most upper-left pixel in the canvas. On the other end of the spectrum, there were nearly 2900 pixels (0.07% of the canvas) that were placed only once for the entire duration of the event. No pixels were completely untouched.</p>
</section>
</section>
<section id="individual-user-activity" class="level2">
<h2 class="anchored" data-anchor-id="individual-user-activity">Individual user activity üíª</h2>
<p>One specific question I had was whether most activity was driven by a small fraction of users. This is a common phenomenon online where, for example, a small percentage of users are responsible for the vast majority of comments. This is actually a broader phenomenon known as <a href="https://en.wikipedia.org/wiki/Zipf%27s_law">Zipf‚Äôs law</a> in which, essentially, the most common items in a set are vastly more common than the the less common items. Was that true here? For example, I found that over 2.3 million users in this dataset only placed a single pixel.</p>
<p>I pulled the top 100,000 most prolific users (i.e., users that placed the most pixels) and plotted the number of pixels they placed in order of their their rank.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/plot-contributors-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The results don‚Äôt quite follow Zipf‚Äôs law. It turns out the most extremely prolific users (who placed 600+ pixels) weren‚Äôt that much more prolific than thousands of others who placed 200+ pixels.</p>
<p>Let‚Äôs instead look at <em>what</em> they actually did, starting with the most prolific user, who placed 795 pixels. Below, I‚Äôve traced this user‚Äôs path over roughly 3.5 days.</p>
<div class="cell" data-fig.dim="[7,7]">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/plot-top-user-activity-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Looking at this user‚Äôs most frequent contributions, and after doing a bit of research on <a href="https://place-atlas.stefanocoding.me/">the r/place atlas</a> I inferred that they are a My Little Pony fan. The My Little Pony community apparently started working in the upper left part of the canvas but <a href="https://place-atlas.stefanocoding.me/#two6gx">moved to the upper right</a> and <a href="https://place-atlas.stefanocoding.me/#000367">later to the bottom</a>, due to <a href="https://place-atlas.stefanocoding.me/#tx5qkx">conflict with followers of a Twitch streamer</a>. ü§∑</p>
<p>This extremely active brony moved around a fair amount. Let‚Äôs look at some other users who barely moved at all. In the figure below, I‚Äôve traced the paths of 10 of the least mobile users among the top 1000 most prolific.</p>
<div class="cell" data-fig.dim="[7,7]">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The colors here are just meant to distinguish between users.</p>
<p>Among these users was one (the upper-leftmost one) who placed 539 pixels in roughly 58 hours. 443 of those pixels were placed in just a single location. That location? The upper left in the <a href="https://place-atlas.stefanocoding.me/#000111">‚Äúconnection lost‚Äù area</a> (some kind of long-running inside joke). The color? <span style="color: #FF4500;">Orange-red</span>. That area pretty much never changed (and was always black). So this person basically accomplished nothing and was almost certainly a bot (more on that in a bit).</p>
<p>Another user in the figure above (the lime green colored one in the upper left) placed 501 pixels in a roughly a 50-hour period, all within a 36x41 pixel area. That area? <a href="https://place-atlas.stefanocoding.me/#twmbw6">The Canadian flag</a>. The hilarious tragedy of the Canadian flag is documented <a href="https://youtu.be/TyVXmpHQOqk">here</a>. What is impossible to determine is whether this person was trying to vandalize the flag or repair the vandalism.</p>
</section>
<section id="the-rise-of-the-bots" class="level2">
<h2 class="anchored" data-anchor-id="the-rise-of-the-bots">The rise of the bots ü§ñ</h2>
<p>Another major controversy was over the use of ‚Äúbots‚Äù ‚Äì scripts that automatically placed pixels for you whenever your five-minute cool-down period was up. They weren‚Äôt forbidden, but some people saw them as a kind of cheating.</p>
<p>Accusations of widespread bot use were common. But can we find evidence for that in the data?</p>
<p>I looked at every user who placed at least 20 pixels. I then looked at the percentage of times they placed a pixel within 303 seconds (5 minutes + 3 seconds) of their last pixel. In other words, how often were they placing pixels almost as soon as they possibly could?</p>
<p>Here are the results.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It looks like bots were relatively rare. And contrary to my expectations, even among the users that placed hundreds of pixels, they weren‚Äôt generally more likely to be bots. Some people who placed 400+ pixels almost never placed them immediately after their 5 minute cool-off periods, suggesting they were placing them manually.</p>
<p>I chose 3 seconds after the cool-off period ended somewhat arbitrarily, so I re-ran the analysis varying this delay from 0 to 10 seconds. Then I computed what percentage of pixels overall were placed within that period of time.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="rplace_files/figure-html/plot-proportion-of-fast-returns-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Obviously, the longer the delay, the more pixels get included. But even for delays up to 10 seconds, no more than 15% of all pixels were placed.</p>
<p>The bottom line: Surely some people were using scripts. Perhaps as many as 5-10% of pixels were placed by scripts. But this analysis suggests that the vast majority of users weren‚Äôt using them and the vast majority of pixels were manually placed.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<p>The full analysis code I used to generate these plots is available <a href="https://github.com/alanjern/r-place">here</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>